---
description: 
globs: 
alwaysApply: true
---
# 顺口成章小程序用户流程规范

> 版本：1.0.0
> 关联规范：
> - [项目开发规范](mdc:project-rules.mdc)
> - [全局代码规范](mdc:global-code-rules.mdc)

## 一、文档说明

### 1. 文档用途
- 描述小程序的完整使用流程
- 作为开发时的功能参考
- 指导交互设计和实现
- 验证功能完整性

### 2. 使用方式
- 新功能开发前必读
- 功能评审时对照检查
- 测试用例设计参考
- 用户体验优化依据

## 二、用户流程

### 1. 登录流程
- 初次使用：
  1. 展示登录页面
  2. 提供微信一键登录按钮
  3. 获取用户微信授权
  4. 登录成功后跳转到首页
- 非初次使用：
  1. 自动登录
  2. 直接进入首页
- 退出登录：
  1. 在"我的"页面提供退出选项
  2. 退出后返回登录页面

### 2. 导航结构
- 底部导航栏包含三个按钮：
  1. 首页：文章列表展示
  2. 添加（+）：居中圆形按钮
  3. 我的：个人中心

### 3. 文章管理流程
- 添加文章：
  1. 点击"+"按钮
  2. 提供两种添加方式：
     - 批量导入：按年级学期选择预置课文
     - 手动添加：输入自定义文本
  3. 支持中文和英文文本
  4. 自动进行难度分级（基于文章长度）

- 文章列表展示：
  1. 分类筛选：全部/中文/英文
  2. 每篇文章支持：
     - 删除功能
     - 收藏功能
     - 转发功能
  3. 显示文章难度等级

### 4. 练习流程
- 文章详情页：
  1. 提供三个功能入口：
     - 播放范读
     - 朗读练习
     - 背诵练习
  2. 范读功能：
     - 点击后自动播放标准读音

- 朗读/背诵练习：
  1. 进入练习页面
  2. 点击录音按钮开始练习
  3. 录音完成后自动：
     - 进行语音识别
     - 显示识别文本
     - 与原文对比
     - 标记对错（绿色正确，红色错误）
     - 生成系统评分
  4. 保存练习记录
  5. 提供返回主页选项

### 5. 记录查看流程
- 在"我的"页面：
  1. 展示朗读和背诵记录列表
  2. 点击记录可查看：
     - 练习评分
     - 文本对比结果（红绿标记）
  3. 完全正确的记录显示小红花标识

## 三、注意事项

### 1. 流程设计原则
- 操作步骤简单清晰
- 避免用户理解困难
- 提供必要的引导
- 保持交互一致性

### 2. 异常处理
- 网络异常处理：
  - 自动登录失败时的重试机制
  - 语音识别网络中断的处理
- 权限请求处理：
  - 获取用户信息权限
  - 录音权限
- 设备兼容处理：
  - 不同机型的录音兼容
  - 播放器兼容性
- 用户误操作处理：
  - 录音中的意外中断
  - 误删文章的撤销
  - 练习过程中的退出确认

### 3. 性能要求
- 语音识别响应时间：不超过3秒
- 范读音频加载时间：不超过1秒
- 列表滚动流畅性保证
- 批量导入文章的性能优化

### 4. 数据安全
- 用户练习数据本地存储
- 关键操作需确认
- 用户隐私信息保护
- 录音文件的及时清理 